name: C++ Build & Test (Linux)

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout del repository
        uses: actions/checkout@v4

      # Installazione di Eigen su Linux
      - name: Installare Eigen
        run: sudo apt update && sudo apt install -y libeigen3-dev

      # Creazione della cartella build
      - name: Creare la cartella build
        run: mkdir -p build

      # Compilazione con flag ottimizzate e OpenMP
      - name: Compilare il codice
        run: g++ -Wall -O3 -std=c++17 -fopenmp -I/usr/include/eigen3 main.cpp -o build/main

      # Eseguire il test con argomenti da terminale
      - name: Eseguire il test
        run: ./build/main 0.001 0 0 1000
